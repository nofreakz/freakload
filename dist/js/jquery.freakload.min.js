/*
 *  freakLoad - v0.1.0
 *  Preloader JS library
 *  https://github.com/nofreakz/freakLoad
 *
 *  Copyright (c) 2014
 *  MIT License
 */
!function(a,b,c){"use strict";function d(b,c){this.items=b,this.opt=a.extend(!0,{},h,c),this.init()}var e="freakLoad",f={url:"",data:{},priority:.5,tags:[],isLoading:!1,async:!0},g={itemsRequested:0,isLoading:!1,items:[]},h={async:!0,loadByGroup:!1,groupOrder:[],on:{start:a.noop,complete:a.noop},onItem:{start:a.noop,complete:a.noop},onGroup:{start:a.noop,complete:a.noop}};d.prototype={xhr:null,queue:{itemsRequested:0,isLoading:!1,items:[],groups:{}},loaded:{items:[],groups:[]},init:function(){var a;if(this._addItems(this.items),this.opt.loadByGroup)for(a in this.opt.groupOrder)this.loadGroup(a);else this._request()},loadGroup:function(a){this._createGroup(a),this._request(a)},add:function(){},_addItems:function(a){var b,c,d={},e=this.queue;a=this._normalizeItems(a);for(c in a)if(d=a[c],e.items[e.items.length]=d,d.tags.length)for(b in d.tags)b=d.tags[b],this._createGroup(b),e.groups[b].items[e.groups[b].items.length]=d},_normalizeItems:function(b){var c={},d=0,e=0;for(b instanceof Array||(b=[b]),d=b.length;d--;e++)c=b[e],"object"!=typeof c&&(c={url:c}),b[e]=a.extend({},f,c);return this._setPriority(b),b},_setPriority:function(a){return a.sort(function(a,b){return b.priority-a.priority}),a},_createGroup:function(a){this.queue.groups.hasOwnProperty(a)||(this.queue.groups[a]=g)},_request:function(a){var b,c,d=this,e=null,f=this.queue;a&&(b=f.groups[a],b.isLoading=!0),e=setInterval(function(){if(b&&b.itemsRequested<b.items.length)c=b.items[b.itemsRequested];else{if(!(f.itemsRequested<f.items.length))return f.isLoading=!1,void clearInterval(e);c=f.items[f.itemsRequested]}b&&b.itemsRequested++,f.itemsRequested++,d._load(c,b)},0)},_load:function(b){var c=this,d=this.loaded.items;d.indexOf(b.url)<=-1&&(this.queue.isLoading=!0,b.isLoading=!0,this.opt.onItem.start(b),this.xhr=a.ajax({url:b.url,data:b.data,async:b.async?b.async:c.opt.async}).success(function(e){c.loaded.items[d.length]=this.url+a.isPlainObject(b.data)?"":"?"+a.param(b.data),c.opt.onItem.complete(/\.(xml|json|script|html|text)$/.test(b.url)?e:""),c.xhr=null,c.items.length===c.loaded.items.length&&c.opt.on.complete()}).fail(function(b){a.error(b.responseText)}).always(function(){b.isLoading=!1}))}},a[e]=function(b,f){var g=arguments,h=a.data(c,e),i=b instanceof Array?b:!1,j=h&&!i?h[b]:!1;return g.length&&(h||i)?void(h?h instanceof d&&i?"function"==typeof j?j.apply(h,Array.prototype.slice.call(g,1)):a[e]("add",i):(!j||"string"==typeof b&&"_"===b.charAt(0))&&a.error("Method "+b+" does not exist on jQuery."+e):a.data(c,e,new d(i,f))):void a.error("The jquery plugin "+e+" is not able to run whitout arguments or array of items to load.")},a.fn[e]=function(){}}(jQuery,window,document);