/*
 *  freakLoad - v0.1.0
 *  Preloader JS library
 *  https://github.com/nofreakz/freakLoad
 *
 *  Copyright (c) 2014
 *  MIT License
 */
!function(a,b,c){"use strict";function d(b,c){this.items=b,this.opt=a.extend(!0,{},h,c),this.init()}var e="freakLoad",f={url:"",data:{},priority:.5,tags:[],async:!0},g={items:[],loaded:0},h={async:!0,groupOrder:[],on:{start:a.noop,complete:a.noop},onItem:{start:a.noop,complete:a.noop},onGroup:{start:a.noop,complete:a.noop}};d.prototype={xhr:null,queue:{loaded:0,items:[],groups:{}},requested:{items:[],groups:[]},init:function(){this._addItems(this.items),this.load()},load:function(){var a;if(this.opt.groupOrder.length)for(a in this.opt.groupOrder)this.loadGroup(this.opt.groupOrder[a]);this._request()},loadGroup:function(a){this._isGroup(a)?this._request(a):console.warn('No items was found to be loaded on the group "'+a+'".')},add:function(a,b){this._addItems(a),(b===!1?b:!0)&&this.load()},_addItems:function(a){var b=this.queue,c={},d="",e=0,f=0;a=this._normalizeItems(a);for(e in a)if(c=a[e],b.items[b.items.length]=c,c.tags.length)for(f in c.tags)d=c.tags[f],this._createGroup(d),b.groups[d].items[b.groups[d].items.length]=c},_normalizeItems:function(b){var c={},d=0;b instanceof Array||(b=[b]);for(d in b)c=b[d],"object"!=typeof c&&(c={url:c}),b[d]=c=a.extend({},f,c);return this._setPriority(b),b},_setPriority:function(a){return a.sort(function(a,b){return b.priority-a.priority}),a},_createGroup:function(b){this._isGroup(b)||(this.queue.groups[b]=a.extend(!0,{},g))},_isGroup:function(a){return this.queue.groups.hasOwnProperty(a)?!0:!1},_request:function(a){var b=this.queue,c=0,d=0;for(a&&(b=this.queue.groups[a]),d=b.items.length;d>c&&this.requested.items.length<this.queue.items.length;c++)this._load(b.items[c],b,a)},_load:function(b,c,d){if(-1===this.requested.items.indexOf(b.url)){var e=this;this.requested.items[this.requested.items.length]=b.url+(a.isPlainObject(b.data)?"":"?"+a.param(b.data)),b.isLoading=c.isLoading=!0,this.opt.onItem.start(b),-1===this.requested.groups.indexOf(d)&&(this.requested.groups[this.requested.groups.length]=d,this.opt.onGroup.start(d)),this.xhr=a.ajax({url:b.url,data:b.data,async:b.async?b.async:e.opt.async}).success(function(a){c.loaded++,e.queue.loaded++,e.opt.onItem.complete(/\.(xml|json|script|html|text)$/.test(b.url)?a:""),!d||c.loaded!==c.items.length&&e.queue.loaded!==e.queue.items.length||e.opt.onGroup.complete(d),e.queue.loaded===e.queue.items.length&&e.opt.on.complete(),e.xhr=null}).fail(function(b){a.error(b.responseText)})}}},a[e]=function(b,f){var g=arguments,h=a.data(c,e),i=b instanceof Array?b:!1,j=h&&!i?h[b]:!1;return g.length&&(h||i)?void(h?h instanceof d?"function"==typeof j?j.apply(h,Array.prototype.slice.call(g,1)):i&&a[e]("add",i):(!j||"string"==typeof b&&"_"===b.charAt(0))&&a.error("Method "+b+" does not exist on jQuery."+e):a.data(c,e,new d(i,f))):void a.error("The jquery plugin "+e+" is not able to run whitout arguments or array of items to load.")}}(jQuery,window,document);